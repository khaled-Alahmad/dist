# โ ูุงุฆูุฉ ุงูุชุญูู ูู ุงููุดุฑ ุนูู VPS

ุงุณุชุฎุฏู ูุฐู ุงููุงุฆูุฉ ููุชุฃูุฏ ูู ุฅููุงู ุฌููุน ุฎุทูุงุช ุงููุดุฑ ุจูุฌุงุญ.

---

## ๐ง ุฅุนุฏุงุฏ ุงูุฎุงุฏู (Server Setup)

- [ ] ุงูุงุชุตุงู ุจุงูู VPS ุนุจุฑ SSH
- [ ] ุชุญุฏูุซ ุงููุธุงู: `apt update && apt upgrade -y`
- [ ] ุชุซุจูุช Node.js 20+
- [ ] ุชุซุจูุช PM2: `npm install -g pm2`
- [ ] ุชุซุจูุช PostgreSQL
- [ ] ุชุซุจูุช Git (ุฅุฐุง ูู ููู ูุซุจุชุงู)

**ุงูุชุญูู:**
```bash
node --version    # ูุฌุจ ุฃู ุชุธูุฑ v20.x.x
npm --version
pm2 --version
psql --version
```

---

## ๐๏ธ ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database Setup)

- [ ] ุงูุฏุฎูู ุฅูู PostgreSQL: `sudo -u postgres psql`
- [ ] ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช: `CREATE DATABASE school_management;`
- [ ] ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ ุจูููุฉ ูุฑูุฑ ูููุฉ
- [ ] ููุญ ุงูุตูุงุญูุงุช ูููุณุชุฎุฏู ุงูุฌุฏูุฏ
- [ ] ุชุณุฌูู ูุนูููุงุช ุงูุงุชุตุงู (DATABASE_URL)

**ุงูุชุญูู:**
```bash
sudo -u postgres psql -d school_management -c "SELECT 1;"
# ูุฌุจ ุฃู ูุธูุฑ: ?column? 1
```

---

## ๐ ุฑูุน ุงูููุฏ (Code Upload)

- [ ] ุฅูุดุงุก ูุฌูุฏ ุงููุดุฑูุน: `/home/admin/school-app`
- [ ] ุฑูุน ุงูููุฏ (Git/SCP/SFTP)
- [ ] ุงูุชุฃูุฏ ูู ูุฌูุฏ ุฌููุน ุงููููุงุช ุงููุทููุจุฉ

**ุงูุชุญูู:**
```bash
cd /home/admin/school-app
ls -la
# ูุฌุจ ุฃู ุชุฑู: package.json, server/, client/, shared/, etc.
```

---

## โ๏ธ ุชููุฆุฉ ุงููุดุฑูุน (Project Configuration)

- [ ] ุฅูุดุงุก ููู `.env` ูู `.env.example`
- [ ] ุชุญุฏูุซ `NODE_ENV=production`
- [ ] ุชุญุฏูุซ `PORT=3001`
- [ ] ุชุญุฏูุซ `DATABASE_URL` ุจูุนูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [ ] ุชูููุฏ `SESSION_SECRET` ุนุดูุงุฆู ููู
- [ ] ุญูุธ ููู `.env`

**ุชูููุฏ SESSION_SECRET:**
```bash
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

**ุงูุชุญูู:**
```bash
cat .env
# ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ููู ุงูุชุฑุงุถูุฉ ูุซู "your_password_here"
```

---

## ๐ฆ ุจูุงุก ุงููุดุฑูุน (Build Process)

- [ ] ุชุซุจูุช ุงูุญุฒู: `npm install --production=false`
- [ ] ุจูุงุก ุงููุดุฑูุน: `npm run build`
- [ ] ุงูุชุญูู ูู ูุฌูุฏ `dist/`

**ุงูุชุญูู:**
```bash
ls -la dist/
# ูุฌุจ ุฃู ุชุฑู: index.js ู public/
ls -la dist/public/
# ูุฌุจ ุฃู ุชุฑู: index.html, assets/, etc.
```

---

## ๐๏ธ ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database Migration)

- [ ] ุชุดุบูู migrations: `npm run db:push`
- [ ] ุฅูุดุงุก ุญุณุงุจ Admin ุงูุฃูู
- [ ] ุงูุชุญูู ูู ุฅูุดุงุก ุงูุฌุฏุงูู

**ุงูุชุญูู:**
```bash
sudo -u postgres psql -d school_management
\dt    # ุนุฑุถ ุฌููุน ุงูุฌุฏุงูู
\q     # ุงูุฎุฑูุฌ
```

---

## ๐ ุชุดุบูู ุงูุชุทุจูู (Application Startup)

- [ ] ุงูุชุฃูุฏ ูู ูุฌูุฏ `ecosystem.config.cjs`
- [ ] ุฅูุดุงุก ูุฌูุฏ logs: `mkdir -p logs`
- [ ] ุชุดุบูู PM2: `pm2 start ecosystem.config.cjs --env production`
- [ ] ุงูุชุญูู ูู ุงูุชุดุบูู: `pm2 list`
- [ ] ูุญุต logs: `pm2 logs school-management`

**ุงูุชุญูู:**
```bash
pm2 status
# ูุฌุจ ุฃู ุชุฑู ุงูุชุทุจูู ูู ุญุงูุฉ "online"

curl http://localhost:3001/api/health
# ูุฌุจ ุฃู ูุนูุฏ ุจุฑุฏ ุตุญูุญ
```

---

## ๐ ุงูุชุดุบูู ุงูุชููุงุฆู (Auto-Start)

- [ ] ุชูููุฏ startup script: `pm2 startup`
- [ ] ุชูููุฐ ุงูุฃูุฑ ุงูุฐู ูุธูุฑ
- [ ] ุญูุธ ูุงุฆูุฉ PM2: `pm2 save`

**ุงูุชุญูู:**
```bash
pm2 list
sudo reboot  # ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู ููุงุฎุชุจุงุฑ
# ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู:
pm2 list
# ูุฌุจ ุฃู ุชุฑู ุงูุชุทุจูู ูุนูู ุชููุงุฆูุงู
```

---

## ๐ ุฅุนุฏุงุฏ Nginx (Nginx Configuration)

### ุงูุทุฑููุฉ ุงูุฃููู: NodeJS Plugin

- [ ] ุชุซุจูุช HestiaCP NodeJS Plugin
- [ ] ุฅุถุงูุฉ ุงูุชุทุจูู ูู HestiaCP UI
- [ ] ุชุญุฏูุฏ Port 3001

### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุงูุชููุฆุฉ ุงููุฏููุฉ

- [ ] ุฅูุดุงุก ููู ุชููุฆุฉ: `/etc/nginx/sites-available/school-management`
- [ ] ุชุญุฏูุซ `server_name` ุจุงูุฏูููู ุงูุฎุงุต ุจู
- [ ] ุฅูุดุงุก symbolic link: `ln -s /etc/nginx/sites-available/school-management /etc/nginx/sites-enabled/`
- [ ] ุงุฎุชุจุงุฑ ุงูุชููุฆุฉ: `nginx -t`
- [ ] ุฅุนุงุฏุฉ ุชุญููู Nginx: `systemctl reload nginx`

**ุงูุชุญูู:**
```bash
nginx -t
# ูุฌุจ ุฃู ูุธูุฑ: syntax is ok
curl http://yourdomain.com
# ูุฌุจ ุฃู ูุธูุฑ ูุญุชูู ุงููููุน
```

---

## ๐ ุชุซุจูุช SSL (SSL Certificate)

- [ ] ุชุซุจูุช Certbot: `apt install -y certbot python3-certbot-nginx`
- [ ] ุงูุญุตูู ุนูู ุดูุงุฏุฉ: `certbot --nginx -d yourdomain.com -d www.yourdomain.com`
- [ ] ุงูุชุญูู ูู ุงูุชุญุฏูุซ ุงูุชููุงุฆู: `certbot renew --dry-run`
- [ ] ุฅุถุงูุฉ cron job ููุชุญุฏูุซ

**ุงูุชุญูู:**
```bash
curl https://yourdomain.com
# ูุฌุจ ุฃู ูุนูู ุนุจุฑ HTTPS
openssl s_client -connect yourdomain.com:443 -servername yourdomain.com
# ุชุญูู ูู ุตูุงุญูุฉ ุงูุดูุงุฏุฉ
```

---

## ๐ก๏ธ ุงูุฃูุงู (Security)

- [ ] ุชููุฆุฉ Firewall (UFW)
- [ ] ุงูุณูุงุญ ุจู HTTP (80), HTTPS (443), SSH (22) ููุท
- [ ] ุงูุชุฃูุฏ ูู ุนุฏู ูุชุญ Port 3001 ููุนุงูุฉ
- [ ] ุชูููุฏ PostgreSQL ุนูู localhost ููุท
- [ ] ุชุบููุฑ ุฌููุน ูููุงุช ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ

**ุงูุชุญูู:**
```bash
ufw status
# ูุฌุจ ุฃู ุชุฑู ููุท: 22/tcp, 80/tcp, 443/tcp ALLOW
netstat -tlnp | grep 3001
# ูุฌุจ ุฃู ูุณุชูุน ุนูู 127.0.0.1:3001 ููุท
```

---

## ๐พ ุงููุณุฎ ุงูุงุญุชูุงุทู (Backup)

- [ ] ุฅูุดุงุก `backup-db.sh` script
- [ ] ุฌุนูู ูุงุจู ููุชูููุฐ: `chmod +x backup-db.sh`
- [ ] ุงุฎุชุจุงุฑ ุงููุณุฎ ุงูุงุญุชูุงุทู: `./backup-db.sh`
- [ ] ุฅุถุงูุฉ cron job ูููุณุฎ ุงููููู

**ุงูุชุญูู:**
```bash
./backup-db.sh
ls -la /root/backups/
# ูุฌุจ ุฃู ุชุฑู ููู .sql.gz
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ ุงูููุงุฆู (Final Testing)

- [ ] ูุชุญ ุงููููุน ูู ุงููุชุตูุญ: `https://yourdomain.com`
- [ ] ุชุณุฌูู ุงูุฏุฎูู ูู Admin
- [ ] ุฅุถุงูุฉ ูุฑุญูุฉ ุฏุฑุงุณูุฉ ุชุฌุฑูุจูุฉ
- [ ] ุฅุถุงูุฉ ุตู ุชุฌุฑูุจู
- [ ] ุฅุถุงูุฉ ุทุงูุจ ุชุฌุฑูุจู
- [ ] ุชุณุฌูู ุญุถูุฑ ุชุฌุฑูุจู
- [ ] ูุญุต logs: `pm2 logs school-management`
- [ ] ูุญุต Nginx logs: `tail -f /var/log/nginx/school-app-access.log`

---

## ๐ ูููุงุช ูููุฉ (Important Files)

ุชุฃูุฏ ูู ูุฌูุฏ ูุฐู ุงููููุงุช:

```
/home/admin/school-app/
โโโ .env                     โ (ูุนูููุงุช ุญุณุงุณุฉ - ูุง ุชุดุงุฑููุง)
โโโ ecosystem.config.cjs     โ (ุชููุฆุฉ PM2)
โโโ package.json             โ
โโโ dist/                    โ (ุงููุดุฑูุน ุงูููุจูู)
โ   โโโ index.js            โ
โ   โโโ public/             โ
โโโ logs/                    โ (ุณุฌูุงุช PM2)
โโโ update.sh               โ (ุณูุฑูุจุช ุงูุชุญุฏูุซ)
โโโ backup-db.sh            โ (ุณูุฑูุจุช ุงููุณุฎ ุงูุงุญุชูุงุทู)
```

---

## ๐ฏ ููุงุญุธุงุช ููุงุฆูุฉ

### ุจุนุฏ ุงูุงูุชูุงุก ูู ุฌููุน ุงูุฎุทูุงุช:

1. **ุชุณุฌูู ุงููุนูููุงุช ุงููููุฉ:**
   - ูููุฉ ูุฑูุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - SESSION_SECRET
   - ุจูุงูุงุช Admin ุงูุฃูู

2. **ุญูุธ ูุนูููุงุช ุงููุตูู:**
   - ุฑุงุจุท ุงููููุน: `https://yourdomain.com`
   - ุจูุงูุงุช ุงูุฏุฎูู ูููุญุฉ ุงูุชุญูู

3. **ุฅุนุฏุงุฏ ุงูุตูุงูุฉ ุงูุฏูุฑูุฉ:**
   - ูุฑุงุฌุนุฉ logs ุฃุณุจูุนูุงู: `pm2 logs`
   - ูุญุต ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ ุดูุฑูุงู
   - ุชุญุฏูุซ ุงููุธุงู ุดูุฑูุงู: `apt update && apt upgrade`

4. **ุงูุฃูุงูุฑ ุงูุณุฑูุนุฉ:**
   ```bash
   # ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู
   pm2 restart school-management
   
   # ุชุญุฏูุซ ุงูุชุทุจูู
   cd /home/admin/school-app && ./update.sh
   
   # ูุณุฎ ุงุญุชูุงุทู
   /root/backup-db.sh
   
   # ูุดุงูุฏุฉ logs
   pm2 logs school-management
   ```

---

## โ ุงูุชูุงู ุงููุดุฑ

ุนูุฏ ุงูุชูุงู ุฌููุน ุงูููุงุท ุฃุนูุงูุ ูููู ูููุนู ุฌุงูุฒุงู ููุงุณุชุฎุฏุงู! ๐

**ุชูุงูููุง!** ูุธุงู ุฅุฏุงุฑุฉ ุงููุฏุฑุณุฉ ูุนูู ุงูุขู ุนูู VPS ุงูุฎุงุต ุจู.

---

**ุขุฎุฑ ุชุญุฏูุซ:** 26 ููุงูุฑ 2025
